:PROPERTIES:
:ID:       6cb99f19-9a29-4031-bfec-f2eb959058cb
:END:
#+title: Custom repos role
#+date: [2023-11-20 Mon 17:50]
#+startup: overview

[[file:~/workspace/arch-ansible-fork/ansible/roles/custom_repos/]]
* Plays 1: Check state variable
- is present by default
- variable to build the right playbook from
- present meaning if

* Play2: Dispatch to proper custom_repos implementation
- depending of state variable, get the right playbook
- either imports
  - [[id:2a392d0d-61be-494e-a661-313f77e867e3][custom repos present task]]
  - [[id:b7c93ab9-78a4-49cb-8bdc-cfa87abe46ca][custom_repos_absent_task]]

* Play3: Sync databases - update pacman
- pacman update

* Absent plays
** remove custom repos
- [[id:a18c13cb-1551-474e-9bef-33bd3a55d083][Ansible file module]]
** delete repos definitions in pacman.conf
- [[id:970c35a7-cf88-4873-9010-9b4c9e3e766b][Ansible lineinfile module]]
** delete custom servers
- [[id:970c35a7-cf88-4873-9010-9b4c9e3e766b][Ansible lineinfile module]]
